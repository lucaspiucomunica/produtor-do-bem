(()=>{var E=Object.defineProperty;var b=(s,e,t)=>e in s?E(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>b(s,typeof e!="symbol"?e+"":e,t);var y={validateEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)},debounce(s,e){let t;return function(...r){let i=()=>{clearTimeout(t),s(...r)};clearTimeout(t),t=setTimeout(i,e)}},log(...s){window.THEME_DEBUG===!0&&console.log(...s)},logError(...s){window.THEME_DEBUG===!0&&console.error(...s)}};window.ThemeUtils=y;var p=class{constructor(e){this.form=document.querySelector(e),this.form&&(this.states={loading:".loading-state",success:".success-state",error:".error-state"})}validateRequiredField(e,t){if(!e)return!0;let o=e.value.trim()!=="";return o?this.clearFieldError(e):this.showFieldError(e,t),o}validateEmail(e,t){let o=this.validateRequiredField(e,t);return o&&e.value&&!ThemeUtils.validateEmail(e.value)?(this.showFieldError(e,t||"Por favor, digite um e-mail v\xE1lido"),!1):o}showFieldError(e,t){this.clearFieldError(e);let o=document.createElement("span");o.className="error-message",o.textContent=t,(e.closest(".form-group")||e.parentElement).appendChild(o)}clearFieldError(e){let o=(e.closest(".form-group")||e.parentElement).querySelector(".error-message");o&&o.remove()}showGroupError(e,t){this.clearGroupError(e);let o=document.createElement("span");o.className="error-message",o.textContent=t,e.appendChild(o)}clearGroupError(e){let t=e.querySelector(".error-message");t&&t.remove()}clearErrors(){this.form.querySelectorAll(".error-message").forEach(t=>t.remove())}showState(e,t=this.form){t.querySelectorAll(".loading-state, .success-state, .error-state").forEach(i=>i.classList.add("hidden"));let r=t.querySelector(`.${e}-state`);r&&r.classList.remove("hidden")}async sendAjaxRequest(e,t,o){if(typeof e>"u")throw ThemeUtils.logError(`${t} - Vari\xE1veis AJAX n\xE3o definidas`),new Error("Vari\xE1veis AJAX n\xE3o dispon\xEDveis");ThemeUtils.log(`${t} - Dados:`,o);let r={action:t,nonce:e.nonce,...o},i=await fetch(e.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r)});ThemeUtils.log(`${t} - Resposta:`,i);let n=await i.json();if(ThemeUtils.log(`${t} - Dados da resposta:`,n),!n.success)throw ThemeUtils.logError(`${t} - Erro:`,n.data),new Error(n.data?.message||"Erro ao enviar formul\xE1rio");return n}resetForm(){this.form.reset(),this.clearErrors(),this.form.querySelectorAll("input, textarea").forEach(t=>{t.type==="radio"&&(t.checked=!1,t.closest("label")?.classList.remove("selected"))})}};window.BaseForm=p;var l=class{static init(){this.initialized||(this.container=document.createElement("div"),this.container.className="toast-container",document.body.appendChild(this.container),this.initialized=!0)}static show(e="success",t="",o=4e3){this.init();let r=this.createToastElement(e,t);this.container.appendChild(r),this.toasts.push(r),this.animateIn(r),this.startProgress(r,o);let i=setTimeout(()=>{this.hide(r)},o);return r.dataset.timeout=i,r}static createToastElement(e,t){let o=document.createElement("div");o.className=`toast toast-${e}`;let r=this.getToastConfig(e);return o.innerHTML=`
            <div class="toast-content">
                <div class="toast-icon">
                    ${this.getIconSvg(r.icon)}
                </div>
                <div class="toast-message">${t}</div>
                <button class="toast-close" aria-label="Fechar notifica\xE7\xE3o">
                    ${this.getIconSvg("close-circle")}
                </button>
            </div>
            <div class="toast-progress">
                <div class="toast-progress-bar"></div>
            </div>
        `,o.querySelector(".toast-close").addEventListener("click",()=>{this.hide(o)}),o}static getToastConfig(e){let t={success:{icon:"tick-circle",class:"toast-success"},error:{icon:"info-circle",class:"toast-error"}};return t[e]||t.success}static getIconSvg(e){return`<img src="${`${window.location.origin}/wp-content/themes/produtor-do-bem/src/img/iconpdb/iconpdb-${e}.svg`}" alt="${e}" class="iconpdb" />`}static animateIn(e){typeof gsap<"u"?gsap.from(e,{x:400,opacity:0,duration:.5,ease:"power3.out"}):e.style.opacity="1"}static animateOut(e){return new Promise(t=>{typeof gsap<"u"?gsap.to(e,{x:400,opacity:0,duration:.3,ease:"power3.in",onComplete:t}):(e.style.opacity="0",setTimeout(t,300))})}static startProgress(e,t){let o=e.querySelector(".toast-progress-bar");typeof gsap<"u"?gsap.fromTo(o,{width:"0%"},{width:"100%",duration:t/1e3,ease:"none"}):(o.style.transition=`width ${t}ms linear`,o.style.width="100%")}static async hide(e){e.dataset.timeout&&clearTimeout(parseInt(e.dataset.timeout)),await this.animateOut(e);let t=this.toasts.indexOf(e);t>-1&&this.toasts.splice(t,1),e.parentNode&&e.parentNode.removeChild(e)}static hideAll(){[...this.toasts].forEach(t=>this.hide(t))}};h(l,"container",null),h(l,"toasts",[]),h(l,"initialized",!1);window.Toast=l;var u={processedAttr:"data-svg-ids-sanitized",init(){let s=()=>{let e=document.querySelectorAll("svg.svg-inline");e.length&&e.forEach(t=>{u.ensureUniqueIds(t)})};s(),window.addEventListener("load",s,{once:!0})},ensureUniqueIds(s){if(!(s instanceof SVGElement)||s.hasAttribute(u.processedAttr))return;let e=s.querySelectorAll("[id]");if(!e.length){s.setAttribute(u.processedAttr,"true");return}let t="-"+Math.random().toString(36).slice(2,8),o={};e.forEach(i=>{let n=i.id;n&&(o[n]||(o[n]=`${n}${t}`),i.id=o[n])}),[s,...s.querySelectorAll("*")].forEach(i=>{(i.attributes?Array.from(i.attributes):[]).forEach(m=>{let{name:d}=m,{value:c}=m;if(c){if(c.includes("url(#")&&(c=c.replace(/url\(#([^)]+)\)/g,(a,g)=>o[g]?`url(#${o[g]})`:a)),(d==="href"||d==="xlink:href")&&c.startsWith("#")){let a=c.slice(1);o[a]&&(c=`#${o[a]}`)}(d==="aria-labelledby"||d==="aria-describedby")&&(c=c.split(/\s+/).filter(Boolean).map(a=>o[a]?o[a]:a).join(" ")),c!==m.value&&i.setAttribute(d,c)}})}),s.setAttribute(u.processedAttr,"true")}},w={checkHeights(){document.querySelectorAll(".card-protocol").forEach(e=>{let t=e.querySelector(".card-protocol-list-wrapper"),o=e.querySelector(".card-protocol-list"),r=e.querySelector(".card-protocol-more");if(t&&o&&r){let i=t.offsetHeight,n=o.offsetHeight;r.classList.toggle("card-protocol-more-active",n>i)}})},toggle(s){let e=s.querySelector(".card-protocol-more button span");if(!e)return;let t=s.classList.contains("card-protocol-expanded");s.classList.toggle("card-protocol-expanded"),e.textContent=t?"Ver todos":"Ocultar",s.dataset.expanded=!t},init(){document.addEventListener("click",s=>{let e=s.target.closest(".card-protocol-more button");if(e){s.preventDefault();let t=e.closest(".card-protocol");t&&this.toggle(t)}}),document.querySelectorAll(".card-protocol").forEach(s=>{s.dataset.expanded="false"}),this.checkHeights()}};document.addEventListener("DOMContentLoaded",()=>{w.init(),u.init()});window.addEventListener("resize",ThemeUtils.debounce(()=>w.checkHeights(),250));var v={setPosition(){let s=document.querySelector(".site-header .site-header-content"),e=document.querySelectorAll(".sub-menu-wrapper");if(s&&e.length>0){let t=s.offsetHeight+s.offsetTop;e.forEach(o=>{o.style.top=`${t}px`})}},closeSubmenu(s){let e=s.closest("li"),t=e?.querySelector(".sub-menu-wrapper");s.classList.remove("active"),s.setAttribute("aria-expanded","false"),t&&t.classList.remove("active"),e&&e.classList.remove("active")},closeAllSubmenus(){document.querySelectorAll(".submenu-toggle").forEach(e=>this.closeSubmenu(e))},toggleSubmenu(s){let e=s.closest("li"),t=e?.querySelector(".sub-menu-wrapper"),o=s.classList.contains("active");s.classList.toggle("active"),s.setAttribute("aria-expanded",!o),t&&t.classList.toggle("active"),e&&e.classList.toggle("active")},init(){let s=document.querySelectorAll(".submenu-toggle");if(s.length===0){console.warn("Nenhum .submenu-toggle encontrado");return}s.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),s.forEach(o=>{o!==e&&this.closeSubmenu(o)}),this.toggleSubmenu(e)})}),document.addEventListener("click",e=>{e.target.closest(".site-header nav")||this.closeAllSubmenus()}),this.setPosition()}},f={wrapper:null,openBtn:null,closeBtn:null,isOpen:!1,scrollbarWidth:0,calculateScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth},lockScroll(){this.scrollbarWidth=this.calculateScrollbarWidth(),document.body.style.overflow="hidden",document.body.style.paddingRight=`${this.scrollbarWidth}px`},unlockScroll(){document.body.style.overflow="",document.body.style.paddingRight=""},checkMenuHeight(){if(!this.wrapper)return;let s=window.innerHeight;this.wrapper.scrollHeight>s?this.wrapper.classList.add("menu-scrollable"):this.wrapper.classList.remove("menu-scrollable")},open(){this.isOpen||!this.wrapper||(this.isOpen=!0,this.lockScroll(),this.wrapper.classList.remove("site-menu-mobile-wrapper-hidden"),gsap.fromTo(this.wrapper,{opacity:0},{opacity:1,duration:.3,ease:"power2.out",onComplete:()=>{this.checkMenuHeight()}}))},close(){!this.isOpen||!this.wrapper||(this.isOpen=!1,gsap.to(this.wrapper,{opacity:0,duration:.3,ease:"power2.in",onComplete:()=>{this.wrapper.classList.add("site-menu-mobile-wrapper-hidden"),this.wrapper.classList.remove("menu-scrollable"),this.unlockScroll()}}))},init(){if(this.wrapper=document.querySelector(".site-menu-mobile-wrapper"),this.openBtn=document.querySelector("#menu-mobile-open"),this.closeBtn=document.querySelector("#menu-mobile-close"),!this.wrapper||!this.openBtn||!this.closeBtn){console.warn("Elementos do menu mobile n\xE3o encontrados");return}this.openBtn.addEventListener("click",e=>{e.preventDefault(),this.open()}),this.closeBtn.addEventListener("click",e=>{e.preventDefault(),this.close()}),this.wrapper.querySelectorAll("a, button").forEach(e=>{e.id!=="menu-mobile-close"&&e.addEventListener("click",()=>{this.close()})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isOpen&&this.close()})}};document.addEventListener("DOMContentLoaded",()=>{v.init(),f.init()});window.addEventListener("resize",ThemeUtils.debounce(()=>{v.setPosition(),f.isOpen&&f.checkMenuHeight()},250));document.addEventListener("DOMContentLoaded",function(){gsap.registerPlugin(ScrollTrigger,ScrollSmoother);let s=ScrollSmoother.create({wrapper:"#smooth-wrapper",content:"#smooth-content",smooth:1.5,effects:!0,smoothTouch:.1,normalizeScroll:!1,ignoreMobileResize:!1,preventDefault:!0});function e(){s&&s.refresh(),ScrollTrigger.refresh()}window.refreshScrollSmoother=e,window.toggleScrollSmoother=function(o=!0){s&&s.paused(!o)},window.scrollToElement=function(o,r=0){if(!s)return;let i=typeof r=="string"?r:`top ${r}px`;s.scrollTo(o,!0,i)};let t=ThemeUtils.debounce(e,250);window.addEventListener("resize",t),window.addEventListener("load",e),document.fonts&&document.fonts.ready&&document.fonts.ready.then(e)});})();
