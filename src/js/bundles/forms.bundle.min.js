(()=>{var E=Object.defineProperty;var g=(l,e,t)=>e in l?E(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var w=(l,e,t)=>g(l,typeof e!="symbol"?e+"":e,t);var f=class extends BaseForm{constructor(){if(super("#newsletter-form"),!this.form){ThemeUtils.logError("Formul\xE1rio de newsletter n\xE3o encontrado");return}if(this.emailInput=this.form.querySelector("#newsletter-email"),this.submitButton=this.form.querySelector(".btn-submit-newsletter"),!this.emailInput){ThemeUtils.logError("Campo de e-mail n\xE3o encontrado no formul\xE1rio de newsletter");return}this.init()}init(){this.setupEventListeners()}setupEventListeners(){this.form.addEventListener("submit",e=>{e.preventDefault(),this.submitForm()}),this.submitButton&&this.submitButton.addEventListener("click",e=>{e.preventDefault(),this.submitForm()})}submitForm(){if(ThemeUtils.log("Newsletter form - Iniciando submiss\xE3o"),!this.validateForm()){ThemeUtils.log("Newsletter form - Valida\xE7\xE3o falhou");return}this.sendFormData()}validateForm(){return this.clearErrors(),this.validateEmail(this.emailInput,"Por favor, digite um e-mail v\xE1lido")}async sendFormData(){this.submitButton&&(this.submitButton.disabled=!0,this.submitButton.classList.add("opacity-50","cursor-not-allowed"));try{let e=this.collectFormData();ThemeUtils.log("Newsletter form - Enviando dados:",e),await this.sendAjaxRequest(window.newsletter_ajax,"submit_newsletter",e),ThemeUtils.log("Newsletter form - Enviado com sucesso"),this.handleSuccess()}catch(e){ThemeUtils.logError("Newsletter form - Erro ao enviar:",e),this.handleError(e)}finally{this.submitButton&&(this.submitButton.disabled=!1,this.submitButton.classList.remove("opacity-50","cursor-not-allowed"))}}collectFormData(){return{email:this.emailInput.value.trim()}}handleSuccess(){typeof Toast<"u"?Toast.show("success","Inscri\xE7\xE3o realizada com sucesso!",8e3):(ThemeUtils.logError("Toast n\xE3o est\xE1 dispon\xEDvel"),alert("Inscri\xE7\xE3o realizada com sucesso!")),this.resetForm()}handleError(e){let t=e.message||"Ocorreu um erro ao processar sua inscri\xE7\xE3o. Por favor, tente novamente.";typeof Toast<"u"?Toast.show("error",t,8e3):(ThemeUtils.logError("Toast n\xE3o est\xE1 dispon\xEDvel"),alert(t))}resetForm(){super.resetForm(),ThemeUtils.log("Newsletter form - Formul\xE1rio resetado")}};document.addEventListener("DOMContentLoaded",()=>{new f});var p=class extends BaseForm{constructor(){super("#form-denuncia"),this.modal=document.getElementById("modal-denuncia"),this.openButtons=document.querySelectorAll('[data-modal="denuncia"]'),this.closeButtons=this.modal?.querySelectorAll(".modal-close, .btn-close-modal"),!(!this.modal||!this.form)&&(this.selectors={nome:"#denuncia-nome",email:"#denuncia-email",telefone:"#denuncia-telefone",mensagem:"#denuncia-mensagem"},this.init())}init(){this.setupEventListeners()}setupEventListeners(){this.openButtons.forEach(t=>{t.addEventListener("click",o=>{o.preventDefault(),this.openModal()})}),this.closeButtons.forEach(t=>{t.addEventListener("click",()=>{this.closeModal()})}),this.modal.addEventListener("click",t=>{t.target===this.modal&&this.closeModal()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&!this.modal.classList.contains("hidden")&&this.closeModal()}),this.form.addEventListener("submit",t=>{t.preventDefault(),this.submitForm()});let e=this.modal.querySelector(".btn-retry");e&&e.addEventListener("click",()=>{this.showModalState("form")})}openModal(){this.modal.classList.remove("hidden"),document.body.style.overflow="hidden",this.showModalState("form")}closeModal(){this.modal.classList.add("hidden"),document.body.style.overflow="",this.resetForm()}showModalState(e){this.modal.querySelectorAll(".modal-state").forEach(s=>s.classList.add("hidden"));let o=this.modal.querySelector(`.modal-state-${e}`);o&&o.classList.remove("hidden")}submitForm(){this.validateForm()&&(this.showModalState("loading"),this.sendFormData())}validateForm(){let e=this.form.querySelector(this.selectors.mensagem),t=this.form.querySelector(this.selectors.email);this.clearErrors();let o=this.validateRequiredField(e,"Por favor, escreva sua den\xFAncia");return t.value.trim()&&(ThemeUtils.validateEmail(t.value)||(this.showFieldError(t,"Por favor, digite um e-mail v\xE1lido"),o=!1)),o}async sendFormData(){try{let e=this.collectFormData();await this.sendAjaxRequest(window.denuncia_ajax,"submit_denuncia",e),this.showModalState("success")}catch(e){this.showModalState("error"),this.updateErrorMessage({details:e.message})}}collectFormData(){return{nome:this.form.querySelector(this.selectors.nome)?.value||"",email:this.form.querySelector(this.selectors.email)?.value||"",telefone:this.form.querySelector(this.selectors.telefone)?.value||"",mensagem:this.form.querySelector(this.selectors.mensagem)?.value||""}}updateErrorMessage(e){if(!e?.details)return;let o=this.modal.querySelector(".modal-state-error")?.querySelector(".modal-description");o&&(o.textContent=`Erro: ${e.details}`)}resetForm(){super.resetForm(),this.showModalState("form")}};document.addEventListener("DOMContentLoaded",()=>{new p});var S=class extends BaseForm{constructor(){super("#form-download-protocolo"),this.modal=document.getElementById("modal-download-protocolo"),this.openButtons=document.querySelectorAll('[data-modal="download-protocolo"]'),this.closeButtons=this.modal?.querySelectorAll(".modal-close, .btn-close-modal"),!(!this.modal||!this.form)&&(this.selectors={nome:"#download-protocolo-nome",email:"#download-protocolo-email",telefone:"#download-protocolo-telefone",euSou:'input[name="eu-sou"]'},this.downloadUrl=null,this.currentVariant=null,this.defaultTexts={title:"Protocolo",description:"Preencha o formul\xE1rio abaixo para fazer o download do protocolo completo."},this.variantTexts={"apendice-bcc-ecc":{title:"Protocolo BCC/ECC",description:"Preencha o formul\xE1rio abaixo para fazer o download do protocolo completo."}},this.init())}init(){this.setupEventListeners(),this.setupRadioOptions()}setupEventListeners(){this.openButtons.forEach(o=>{o.addEventListener("click",s=>{s.preventDefault(),this.openModal(o)})}),this.closeButtons.forEach(o=>{o.addEventListener("click",()=>{this.closeModal()})}),this.modal.addEventListener("click",o=>{o.target===this.modal&&this.closeModal()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&!this.modal.classList.contains("hidden")&&this.closeModal()}),this.form.addEventListener("submit",o=>{o.preventDefault(),this.submitForm()});let e=this.modal.querySelector(".btn-retry");e&&e.addEventListener("click",()=>{this.showModalState("form")});let t=this.modal.querySelector("#manual-download-link");t&&t.addEventListener("click",o=>{this.downloadUrl&&(o.preventDefault(),this.initiateDownload())})}setupRadioOptions(){this.form?.querySelectorAll(".form-field-radio-group")?.forEach(t=>{t.querySelectorAll('input[type="radio"]').forEach(s=>{s.addEventListener("change",()=>{t.querySelectorAll("label").forEach(r=>r.classList.remove("selected")),s.checked&&s.closest("label").classList.add("selected")})})})}openModal(e){this.currentVariant=e?.dataset?.modalVariant||null,this.updateModalTexts(),this.modal.classList.remove("hidden"),document.body.style.overflow="hidden",this.showModalState("form")}updateModalTexts(){let e=this.currentVariant&&this.variantTexts[this.currentVariant]?this.variantTexts[this.currentVariant]:this.defaultTexts,t=this.modal.querySelector(".modal-state-form"),o=t?.querySelector(".modal-title"),s=t?.querySelector(".modal-description");o&&(o.textContent=e.title),s&&(s.textContent=e.description)}closeModal(){this.modal.classList.add("hidden"),document.body.style.overflow="",this.resetForm(),this.downloadUrl=null,this.currentVariant=null}showModalState(e){this.modal.querySelectorAll(".modal-state").forEach(s=>s.classList.add("hidden"));let o=this.modal.querySelector(`.modal-state-${e}`);o&&o.classList.remove("hidden")}submitForm(){this.validateForm()&&(this.showModalState("loading"),this.sendFormData())}validateForm(){let e=this.form.querySelector(this.selectors.nome),t=this.form.querySelector(this.selectors.email),o=this.form.querySelectorAll(this.selectors.euSou);this.clearErrors();let s=!0;if(this.validateRequiredField(e,"Por favor, digite seu nome")||(s=!1),this.validateEmail(t,"Por favor, digite um e-mail v\xE1lido")||(s=!1),!Array.from(o).some(r=>r.checked)){let r=this.form.querySelector(".form-field-radio-group");r&&this.showGroupError(r.closest(".form-field-wrapper"),"Por favor, selecione uma op\xE7\xE3o"),s=!1}return s}async sendFormData(){try{let e=this.collectFormData(),t=await this.sendAjaxRequest(window.download_protocolo_ajax,"submit_download_protocolo",e);this.downloadUrl=t.data?.arquivo_url,this.downloadUrl&&(this.initiateDownload(),this.updateDownloadLink()),this.showModalState("success")}catch(e){this.showModalState("error"),this.updateErrorMessage({details:e.message})}}collectFormData(){let e=this.form.querySelector(`${this.selectors.euSou}:checked`);return{nome:this.form.querySelector(this.selectors.nome)?.value||"",email:this.form.querySelector(this.selectors.email)?.value||"",telefone:this.form.querySelector(this.selectors.telefone)?.value||"","eu-sou":e?.value||"",post_id:window.download_protocolo_ajax?.post_id||"",protocolo:window.download_protocolo_ajax?.post_title||"",variant:this.currentVariant||""}}initiateDownload(){if(!this.downloadUrl)return;let e=document.createElement("a");e.href=this.downloadUrl,e.download="",e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}updateDownloadLink(){let e=this.modal.querySelector("#manual-download-link");e&&this.downloadUrl&&(e.href=this.downloadUrl,e.style.display="inline")}updateErrorMessage(e){if(!e?.details)return;let o=this.modal.querySelector(".modal-state-error")?.querySelector(".modal-description");o&&(o.textContent=`Erro: ${e.details}`)}resetForm(){super.resetForm(),this.showModalState("form")}};document.addEventListener("DOMContentLoaded",()=>{new S});var c=class c{constructor(){this.modal=document.getElementById("modal-criterios"),this.openButtons=document.querySelectorAll('[data-modal="criterios"]'),this.closeButtons=this.modal?.querySelectorAll(".modal-close, .btn-close-modal"),this.currentSlide=0,this.btnsPrev=null,this.btnsNext=null,this.totalSlides=0,this.scrollIndicators=null,this.modal&&this.init()}init(){this.btnsPrev=this.modal?.querySelectorAll(".btn-prev"),this.btnsNext=this.modal?.querySelectorAll(".btn-next"),this.totalSlides=this.modal?.querySelectorAll(".slide-criterios-item").length||0,this.scrollIndicators=this.modal?.querySelectorAll(".scroll-indicator"),this.setupEventListeners(),this.setupScrollDetection()}setupEventListeners(){this.openButtons.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=parseInt(e.dataset.index)||0;this.openModal(o)})}),this.closeButtons.forEach(e=>{e.addEventListener("click",()=>{this.closeModal()})}),this.modal.addEventListener("click",e=>{e.target===this.modal&&this.closeModal()}),document.addEventListener("keydown",e=>{this.modal.classList.contains("hidden")||(e.key==="Escape"?this.closeModal():e.key==="ArrowLeft"?this.prevSlide():e.key==="ArrowRight"&&this.nextSlide())}),this.btnsPrev?.forEach(e=>{e.addEventListener("click",()=>this.prevSlide())}),this.btnsNext?.forEach(e=>{e.addEventListener("click",()=>this.nextSlide())})}animateSlideOut(e,t,o){let{duration:s,ease:i,transforms:r}=c.ANIMATIONS,a=gsap.timeline();return a.to(e,{opacity:0,x:-r.slideX*o,scale:r.slideScale.min,rotate:-r.slideRotate*o,duration:s.out,ease:i.in,onComplete:()=>{e.classList.add("hidden")}}),a.to(t,{opacity:0,duration:s.out,scale:r.slideScale.max,ease:i.in,onComplete:()=>{t.classList.add("hidden")}},"<"),a}animateSlideIn(e,t,o){let{duration:s,ease:i,transforms:r}=c.ANIMATIONS,a=gsap.timeline();return a.call(()=>{e.classList.remove("hidden"),t.classList.remove("hidden")}),a.set(e,{opacity:0,scale:r.slideScale.min,rotate:r.slideRotate*o,x:r.slideX*o}),a.set(t,{opacity:0,scale:r.slideScale.max}),a.to(e,{opacity:1,x:0,scale:1,rotate:0,duration:s.in,ease:i.out}),a.to(t,{opacity:1,scale:1,duration:s.in,ease:i.out},"<"),a}animateSlideElements(e){let{duration:t,ease:o,transforms:s}=c.ANIMATIONS,i=gsap.timeline(),r=e.querySelector(".criterio-item-content-number"),a=e.querySelector(".criterio-item-content-icon"),d=e.querySelector(".criterio-item-content-title"),u=e.querySelector(".criterio-item-content-header-description"),n=e.querySelector(".tag-1"),m=e.querySelector(".criterio-item-content-caracteristicas-header"),h=e.querySelectorAll(".criterio-item-content-caracteristicas-list-item");if(gsap.set([r,a],{scale:s.elementScale,opacity:0}),u&&gsap.set(u,{opacity:0}),gsap.set(n,{opacity:0,x:-s.elementX}),gsap.set([m,...h],{opacity:0,y:s.elementY}),r&&i.to(r,{scale:1,opacity:1,duration:t.elements,ease:o.out},.1),a&&i.to(a,{scale:1,opacity:1,duration:t.elements,ease:o.out},.2),d){let v=new SplitText(d,{type:"words,chars"});gsap.set(v.chars,{opacity:0,y:20}),i.to(v.chars,{opacity:1,y:0,duration:.5,stagger:.03,ease:o.out},.3)}return u&&i.to(u,{opacity:1,duration:t.elements,ease:o.out},.4),n&&i.to(n,{opacity:1,x:0,duration:t.elements,ease:o.out},.5),m&&i.to(m,{opacity:1,y:0,duration:t.elements,ease:o.out},.6),h.length>0&&i.to(h,{opacity:1,y:0,duration:t.elements,stagger:c.ANIMATIONS.duration.stagger,ease:o.out},.7),i}openModal(e=0){this.modal.classList.remove("hidden"),document.body.style.overflow="hidden";let t=this.modal.querySelectorAll(".slide-criterios-item"),o=this.modal.querySelectorAll(".slide-criterios-image");t.forEach((i,r)=>{r!==e?(i.classList.add("hidden"),gsap.set(i,{opacity:1,x:0,scale:1,rotate:0})):(i.classList.remove("hidden"),gsap.set(i,{opacity:1,x:0,scale:1,rotate:0}))}),o.forEach((i,r)=>{r!==e?(i.classList.add("hidden"),gsap.set(i,{opacity:1,x:0,scale:1})):(i.classList.remove("hidden"),gsap.set(i,{opacity:1,x:0,scale:1}))}),this.currentSlide=e,this.updateNavigationButtons(),this.checkScrollOnCurrentSlide(),this.scrollSlideToTop();let s=t[e];s&&this.animateSlideElements(s)}closeModal(){this.modal.classList.add("hidden"),document.body.style.overflow=""}goToSlide(e){if(this.currentSlide===e)return;let t=this.modal.querySelectorAll(".slide-criterios-item"),o=this.modal.querySelectorAll(".slide-criterios-image"),s=e>this.currentSlide?1:-1,i=t[this.currentSlide],r=t[e],a=o[this.currentSlide],d=o[e];if(!i||!r||!a||!d)return;this.modal.querySelectorAll(".criterio-item-content-caracteristicas").forEach(m=>{m.scrollTop=0});let n=gsap.timeline({onComplete:()=>{this.checkScrollOnCurrentSlide()}});n.add(this.animateSlideOut(i,a,s)),n.add(this.animateSlideIn(r,d,s)),n.add(this.animateSlideElements(r),"-=0.2"),this.currentSlide=e,this.updateNavigationButtons(),this.scrollSlideToTop()}nextSlide(){this.currentSlide===this.totalSlides-1?this.closeModal():this.goToSlide(this.currentSlide+1)}prevSlide(){this.currentSlide===0?this.closeModal():this.goToSlide(this.currentSlide-1)}updateNavigationButtons(){this.btnsPrev?.forEach(e=>{let t=e.querySelector("span");this.currentSlide===0?t.textContent="Sair":t.textContent="Anterior"}),this.btnsNext?.forEach(e=>{let t=e.querySelector("span");this.currentSlide===this.totalSlides-1?t.textContent="Sair":t.textContent="Pr\xF3ximo"})}setupScrollDetection(){window.addEventListener("resize",()=>{this.checkScrollOnCurrentSlide()}),this.modal?.querySelectorAll(".criterio-item-content-caracteristicas")?.forEach(t=>{t.addEventListener("scroll",()=>{let s=t.closest(".slide-criterios-item")?.querySelector(".scroll-indicator");s&&t.scrollTop>10&&s.classList.remove("active")})})}checkScrollOnCurrentSlide(){let e=this.modal.querySelector(".slide-criterios-item:not(.hidden)");if(!e)return;let t=e.querySelector(".criterio-item-content-caracteristicas"),o=e.querySelector(".scroll-indicator");if(!t||!o)return;let s=t.scrollHeight>t.clientHeight;o.classList.toggle("active",s)}scrollSlideToTop(){let e=this.modal.querySelector(".modal-container");e&&gsap.to(e,{scrollTop:0,duration:.5,ease:"power2.out"})}};w(c,"ANIMATIONS",{duration:{out:.3,in:.4,elements:.6,stagger:.08},ease:{in:"power2.in",out:"power2.out",elastic:"elastic.out(1, 0.5)"},transforms:{slideX:140,slideScale:{min:.8,max:1.2},slideRotate:10,elementScale:0,elementY:30,elementX:-30}});var y=c;document.addEventListener("DOMContentLoaded",()=>{new y});})();
